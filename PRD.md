个人愿望清单 (Personal Wishlist)

核心功能： 用户可以创建和管理自己的愿望清单，并能将清单通过一个公开链接分享给朋友。

为什么有趣且有用： 这是一个非常实用的工具！用户可以为自己的生日、新年或者任何节日创建一个愿望单，朋友们通过链接就能知道该送什么礼物，避免了尴尬。它既有私密性（只有自己能编辑），又有社交分享的属性。

为什么适合做教程：
逻辑清晰： 数据结构简单（用户表、愿望清单表）。
完美展示 RLS： 这是 Supabase 的王牌功能——行级别安全策略 (Row Level Security)。你可以用它来轻松实现“用户只能查看和修改自己的数据”，这是绝佳的教学案例。


可展示的 Supabase 功能：
Auth: 用户注册和登录。
Database: 存储用户和愿望清单数据。
RLS: 保证用户数据隔离。

我正在开发一个基于 Next.js 的「愿望清单」应用，需要你协助实现前端功能。

1. 项目基础与技术栈
框架： Next.js（使用 App Router）
后端服务： Supabase（已配置认证功能，API Key和URL已替换为实际值，存储在.env文件中，本地示例代码可正常运行认证流程）
数据库： Supabase 托管的PostgreSQL（当前为空，需设计表结构）
开发工具： Cursor（需生成可直接运行的代码，包含组件、API 调用、状态管理等）
额外依赖： 可使用 Tailwind CSS 进行样式开发，无需额外 UI 库

2. 核心功能需求（用户操作流程）
2.1 用户认证（已基础实现，需整合到功能中）
基于 Supabase Auth 实现登录 / 注册状态判断。
未登录用户仅能查看公开分享的愿望清单，登录后可管理自己的清单。

2.2 愿望清单核心功能
创建： 登录用户可在表单中输入愿望名称、描述、优先级（高 / 中 / 低）、截止日期，提交后保存到数据库。
查看：
个人页展示当前用户的所有愿望清单（按创建时间倒序）。
支持筛选（按优先级）和搜索（按名称 / 描述）。
更新： 用户可修改自己的愿望信息（状态同步到数据库）。
删除： 用户可删除自己的愿望，删除前需二次确认。
分享： 每个愿望清单可设置「公开 / 私有」状态。
公开清单生成唯一分享链接（如 /shared/[清单ID]），非登录用户可通过链接查看。
支持复制分享链接功能。

3. 数据库设计需求
需设计 wishlists 表结构，包含必要字段：
id (UUID, Primary Key, 默认使用 gen_random_uuid())
user_id (UUID, 外键关联到 auth.users.id)
item_name (TEXT, 必填)
description (TEXT, 可选)
priority (TEXT, 枚举类型或字符串，如 'High', 'Medium', 'Low')
due_date (DATE)
is_public (BOOLEAN, 默认值为 false)
created_at (TIMESTAMP WITH TIME ZONE, 默认使用 now())
updated_at (TIMESTAMP WITH TIME ZONE, 可选，用于记录更新时间)
is_completed (BOOLEAN, 默认值为 false)
需考虑 Row Level Security（RLS）策略：
所有者可修改 / 删除自己的清单。
公开清单允许所有用户查看。
所有用户都可以创建自己的愿望清单。
* 已认证用户只能查看自己的愿望清单项目。         
* 已认证用户只能创建自己的愿望清单项目。         
* 已认证用户只能更新自己的愿望清单项目。         
* 已认证用户只能删除自己的愿望清单项目。

4. 开发输出要求
表结构设计： 提供 Supabase SQL 建表语句（包含字段定义、索引、RLS 规则）。
页面组件：
登录 / 注册页（整合现有认证逻辑）。
个人愿望清单首页（包含创建、查看、筛选、搜索功能）。
愿望详情 / 编辑页（支持更新功能）。
分享页（展示公开清单内容）。
API 调用： 封装 Supabase 客户端调用函数（如 createWish、getUserWishes、toggleShareStatus 等），处理加载状态和错误提示。
状态管理： 使用 React useState/useEffect 或 React Query 管理表单状态和数据获取。
样式： 提供基础响应式布局（适配移动端和桌面端），按钮、表单、列表等元素风格统一。

5. 额外细节
所有操作需有加载状态提示（如按钮加载中、列表加载动画）。
错误处理：网络异常、权限不足等情况需显示友好提示。
代码需包含注释，说明核心逻辑（如认证状态判断、数据库操作流程）。